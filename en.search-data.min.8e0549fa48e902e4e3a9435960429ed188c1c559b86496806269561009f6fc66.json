[{"id":0,"href":"/Notes/docs/bellman/","title":"Bellmanův princip optimality","section":"Docs","content":" Bellmanův princip optimality # Pro systému se stavovou zpětnou vazbou ve tvaru \\[\\frac{d\\bm{x}}{dτ} = \\bm{f}(\\bm{x},\\bm{u},τ)\\] kde \\( \\bm{x} = \\bm{x}(τ) \\,,\\; \\bm{u} = \\bm{u}(\\bm{x}(τ)) \\) můžeme definovat pro trajektorii ze stavu \\( \\bm{x}(t_0) = \\bm{x}_0 \\) do stavu \\( \\bm{x}(t_1) \\) kritérium optimality \\[J(\\bm{x}_0,t_0) = ∫_{t_0}^{t_1} L(\\bm{x},\\bm{u},τ)\\,dτ\\] Pro libovolný stav \\( \\bm{x}(t)=\\bm{x}_t \\) existuje optimální řízení \\( \\bm{u}^* = \\bm{u}^*(\\bm{x}_t,τ) \\) do koncového stavu \\( \\bm{x}(t_1) \\) \\[\\bm{u}^* = \\argmin_{\\bm{u}} ∫_{t}^{t_1} L(\\bm{x},\\bm{u},τ)\\,dτ\\] kde Bellmanovou funkcí budeme nazýváme kritérium optimality ze stavu \\( \\bm{x}(t)=\\bm{x}_t \\) do koncového stavu \\( \\bm{x}(t_1) \\) , při optimálním řízení \\[J^*(\\bm{x}_t,t) = \\min_{\\bm{u}} ∫_{t}^{t_1} L(\\bm{x},\\bm{u},τ)\\,dτ\\] Pokud hledáme optimální řízení v bodě \\( \\bm{x}(t) = \\bm{x}_t \\) můžeme rozdělit celou trajektorii na tři úseky:\n\\( \\bm{x}(τ) \\,,\\; τ ∈ ⟨t_0,t) \\) který byl už absolvován \\( \\bm{x}(τ) \\,,\\; τ ∈ ⟨t,t\u0026#43;Δt) \\) s kritériem optimality \\( \\int_t^{t\u0026#43;Δt} L(\\bm{x},\\bm{u},τ)\\,dτ \\) \\( \\bm{x}(τ) \\,,\\; τ ∈ ⟨t\u0026#43;Δt,t_1⟩ \\) s kritérium optimality \\( J(\\bm{x}_{t\u0026#43;Δt},t\u0026#43;Δt) \\) S definovanými úseky můžeme Bellmanovu funkci rozepsat do tvaru tzv. Bellmanovy rovnice \\[J^*(\\bm{x}_t,t) = \\min_{\\bm{u}} \\left( \\int_t^{t\u0026#43;Δt} L(\\bm{x},\\bm{u},τ)\\,dτ \u0026#43; J(\\bm{x}_{t\u0026#43;Δt},t\u0026#43;Δt) \\right)\\] kde \\[J(\\bm{x}_{t\u0026#43;Δt},t\u0026#43;Δt) = J(\\bm{x}_t,t) \u0026#43; ∫_{t}^{t\u0026#43;Δt} \\frac{dJ(\\bm{x}_t,t)}{dτ} dτ\\] Dosazením pak získáme \\[J^*(\\bm{x}_t,t) = \\min_{\\bm{u}} \\left( ∫_t^{t\u0026#43;Δt} L(\\bm{x},\\bm{u},τ)\\,dτ \u0026#43; J(\\bm{x}_t,t) \u0026#43; ∫_{t}^{t\u0026#43;Δt} \\frac{dJ(\\bm{x}_t,t)}{dτ} dτ \\right)\\] Jelikož platí \\[J^*(\\bm{x}_t,t) = \\min_{\\bm{u}} \\left( J(\\bm{x}_t,t) \\right)\\] člen \\( J(\\bm{x}_t,t) \\) můžeme vykrátit s levou stranou \\[0 = \\min_{\\bm{u}} \\left( ∫_t^{t\u0026#43;Δt} L(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{dJ(\\bm{x}_t,t)}{dτ} \\ dτ \\right)\\] a provést úpravu \\[\\frac{dJ(\\bm{x}_t,t)}{dτ} = \\frac{∂J(\\bm{x}_t,t)}{∂\\bm{x}(τ)} \\bm{f}(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{∂J(\\bm{x}_t,t)}{∂τ}\\] Výsledkem jejího dosazení je rovnice \\[0 = \\min_{\\bm{u}} \\left( ∫_t^{t\u0026#43;Δt} L(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{∂J(\\bm{x}_t,t)}{∂\\bm{x}}\\bm{f}(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{∂J(\\bm{x}_t,t)}{∂τ} \\ dτ \\right)\\] Pokud pro \\( Δt→0 \\) approximujeme integrál pomocí Reimannova součtu \\[0 = \\left. \\min_{\\bm{u}} \\left( \\left( L(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{∂J(\\bm{x}_t,t)}{∂\\bm{x}}\\bm{f}(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{∂J(\\bm{x}_t,t)}{∂τ} \\right) Δt \\right) \\right|_{τ=t}\\] člen \\( Δt \\) lze vykrátit rovnici upravit do tvaru tzv. Bellmanovy diferenciální rovnice \\[\\left. -\\frac{∂J^*(\\bm{x}_t,t)}{∂τ} \\right|_{τ=t} = \\left. \\min_{\\bm{u}} \\left( L(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{∂J(\\bm{x}_t,t)}{∂\\bm{x}}\t\\bm{f}(\\bm{x},\\bm{u},τ) \\right) \\right|_{τ=t}\\] z které lze přímo odvodit LQR a s úpravou, Pontrjaginův princip minima.\n"},{"id":1,"href":"/Notes/docs/lqr/","title":"Linear Quadratic Regulator","section":"Docs","content":" Linear Quadratic Regulator (LQR) # LQR je určen pro regulaci lineárního systému se stavovou zpětnou vazbou ve tvaru \\[\\bm{\\dot{x}} = \\bm{A} \\, \\bm{x} \u0026#43; \\bm{B} \\, \\bm{u}\\] kde \\( \\bm{x} = \\bm{x}(τ) \\,,\\; \\bm{u} = \\bm{u}(\\bm{x}(τ)) \\) s kvadratickým kritériem optimality \\[J = \\int_{-∞}^{∞} \\underbrace{ \\bm{x}^T \\bm{Q} \\, \\bm{x} \u0026#43; \\bm{u}^T \\bm{R} \\, \\bm{u} }_{L(\\bm{x},\\bm{u},τ)} \\, dτ\\] přičemž \\[\\bm{Q} = \\bm{Q}^T ⪰ 0 \\;,\\quad \\bm{R} = \\bm{R}^T ⪰ 0\\] Jeho syntéza je založena na nalezní řešení Bellmanovy diferenciální rovnice 1 \\[\\left. -\\frac{∂J^*(\\bm{x}_t,t)}{∂τ} \\right|_{τ=t} = \\left. \\min_{\\bm{u}} \\left( L(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{∂J^*(\\bm{x}_t,t)}{∂\\bm{x}}\t\\bm{f}(\\bm{x},\\bm{u},τ) \\right) \\right|_{τ=t}\\] s Bellmanovou funkcí 1 ve tvaru \\[J^*(\\bm{x}_t,t) = \\bm{x}(t)^T \\bm{S} \\, \\bm{x}(t) \\;,\\quad \\bm{S} = \\bm{S}^T\\] Po dosazení výše uvedených tvarů Bellmanovy funkce, stavového popisu systému a Lagrangiánu, získáváme rovnici \\[0 = \\min_{\\bm{u}} \\left( \\bm{x}^T \\bm{Q} \\, \\bm{x} \u0026#43; \\bm{u}^T \\bm{R} \\, \\bm{u} \u0026#43; 2 \\bm{x}^T \\bm{S} ( \\bm{A} \\bm{x} \u0026#43; \\bm{B} \\bm{u} ) \\right)\\] přičemž z podmínky lokálního extrému \\[\\frac{∂}{∂\\bm{u}} \\left( \\bm{x}^T \\bm{Q} \\, \\bm{x} \u0026#43; \\bm{u}^T \\bm{R} \\, \\bm{u} \u0026#43; 2 \\bm{x}^T \\bm{S} ( \\bm{A} \\bm{x} \u0026#43; \\bm{B} \\bm{u} ) \\right) = 0\\] lze vyjádřit optimální řízení \\( \\bm{u}^*(\\bm{x}_t,τ) \\) \\[\\bm{u}^* = - \\bm{R}^{-1} \\bm{B}^T \\bm{S} \\, \\bm{x} \\] které když dosadíme, získáme rovnici \\[0 = \\bm{x}^T \\bm{Q} \\, \\bm{x} \u0026#43; \\bm{x}^T \\bm{S} \\bm{B} \\bm{R}^{-1} \\bm{R} \\bm{R}^{-1} \\bm{B}^T \\bm{S} \\, \\bm{x} \u0026#43; 2 \\bm{x}^T \\bm{S} ( \\bm{A} \\bm{x} - \\bm{B} \\bm{R}^{-1} \\bm{B}^T \\bm{S} \\, \\bm{x} )\\] Tu lze dále upravit na \\[0 = \\bm{x}_t^T \\left( \\bm{Q} - \\bm{S}\\bm{B}\\bm{R}^{-1} \\bm{B}^T \\bm{S} \u0026#43; \\bm{S}\\bm{A} \u0026#43; \\bm{A}^T \\bm{S} \\right) \\bm{x}_t\\] která platí pro libovolné \\( \\bm{x}_t \\) pokud je \\( \\bm{S} \\) řešením tzv. Continuous Algebraic Riccati Equation (C.A.R.E.) \\[\\bm{Q} - \\bm{S}\\bm{B}\\bm{R}^{-1} \\bm{B}^T \\bm{S} \u0026#43; \\bm{S}\\bm{A} \u0026#43; \\bm{A}^T \\bm{S} = 0\\] Belmannův princip optimality\u0026#160;\u0026#x21a9;\u0026#xfe0e;\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"}]