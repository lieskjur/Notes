[{"id":0,"href":"/Notes/docs/bellman/","title":"Bellmanův princip optimality","section":"Docs","content":" Bellmanův princip optimality # Pro dynamický systém se stavovou zpětnou vazbou ve tvaru \\[\\dot{\\bm{x}} = \\bm{f}(\\bm{x},\\bm{u},τ) \\;,\\quad \\bm{u} = \\bm{u}(\\bm{x})\\] kde \\( \\bm{x} = \\bm{x}(τ) \\) , můžeme definovat pro trajektorii ze stavu \\( \\bm{x}(t) \\) do stavu \\( \\bm{x}(T) \\) kritérium optimality \\[J(t) = ∫_{t}^{T} L(\\bm{x},\\bm{u},τ)\\,dτ\\] Pro libovolný stav \\( \\bm{x}(\\tau) \\) pak existuje optimální řízení \\( \\bm{u}^*(τ) \\) pro dosažení žádaného stavu v čase \\( T \\) \\[\\bm{u}^* = \\argmin_{\\bm{u}} ∫_{t}^{T} L(\\bm{x},\\bm{u},τ)\\,dτ\\] kde Bellmanovou funkcí budeme nazýváme kritérium optimality při optimálním řízení \\[J^*(t) = \\min_{\\bm{u}} ∫_{t}^{T} L(\\bm{x},\\bm{u},τ)\\,dτ\\] Bellmanova rovnice # Pokud hledáme optimální řízení ve stavu \\( \\bm{x}(t) \\) , můžeme rozdělit celou trajektorii na dva úseky:\n\\( \\bm{x}(τ) \\,,\\; τ ∈ ⟨t,t\u0026#43;Δt) \\) s kritériem optimality \\( \\int_t^{t\u0026#43;Δt} L(\\bm{x},\\bm{u},τ)\\,dτ \\) \\( \\bm{x}(τ) \\,,\\; τ ∈ ⟨t\u0026#43;Δt,T⟩ \\) s kritérium optimality \\( J(t\u0026#43;Δt) \\) S definovanými úseky můžeme Bellmanovu funkci rozepsat do tvaru tzv. Bellmanovy rovnice \\[J^*(t) = \\min_{\\bm{u}} \\left( \\int_t^{t\u0026#43;Δt} L(\\bm{x},\\bm{u},τ)\\,dτ \u0026#43; J(t\u0026#43;Δt) \\right)\\] Bellmanova diferenciání rovnice # člen \\( J(t\u0026#43;Δt) \\) můžeme rozepsat jako \\[J(t\u0026#43;Δt) = J(t) \u0026#43; ∫_{t}^{t\u0026#43;Δt} \\frac{dJ(t)}{dτ} dτ\\] kdy osazením získáme \\[J^*(t) = \\min_{\\bm{u}} \\left( ∫_t^{t\u0026#43;Δt} L(\\bm{x},\\bm{u},τ)\\,dτ \u0026#43; J(t) \u0026#43; ∫_{t}^{t\u0026#43;Δt} \\frac{dJ(t)}{dτ} dτ \\right)\\] Jelikož platí \\[J^*(t) = \\min_{\\bm{u}} \\left( J(t) \\right)\\] člen \\( J(t) \\) můžeme vykrátit s levou stranou \\[0 = \\min_{\\bm{u}} \\left( ∫_t^{t\u0026#43;Δt} L(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{dJ(t)}{dτ} \\ dτ \\right)\\] a provést úpravu \\[\\frac{dJ(t)}{dτ} = \\frac{∂J(t)}{∂\\bm{x}(τ)} \\bm{f}(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{∂J(t)}{∂τ}\\] Výsledkem jejího dosazení je rovnice \\[0 = \\min_{\\bm{u}} \\left( ∫_t^{t\u0026#43;Δt} L(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{∂J(t)}{∂\\bm{x}}\\bm{f}(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{∂J(t)}{∂τ} \\ dτ \\right)\\] Pokud \\( Δt→0 \\) , můžeme aproximovat integrál pomocí Reimannova součtu a výslednou rovnici upravit do tvaru tzv. Bellmanovy diferenciální rovnice \\[%\\left. -\\frac{∂J^*(t)}{∂τ} %\\right|_{τ=t} = %\\left. \\min_{\\bm{u}} \\left( L(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{∂J(t)}{∂\\bm{x}}\t\\bm{f}(\\bm{x},\\bm{u},τ) \\right) %\\right|_{τ=t}\\] vyjádřené v čase \\( τ = t \\) , ze které lze přímo odvodit LQR a s úpravou, Pontrjaginův princip minima.\n"},{"id":1,"href":"/Notes/docs/lqr/","title":"Linear Quadratic Regulator","section":"Docs","content":" Linear Quadratic Regulator (LQR) # LQR je určen pro regulaci lineárního systému se stavovou zpětnou vazbou ve tvaru \\[\\bm{\\dot{x}} = \\bm{A} \\, \\bm{x} \u0026#43; \\bm{B} \\, \\bm{u} \\;,\\quad \\bm{u} = \\bm{u}(\\bm{x})\\] kde \\( \\bm{x} = \\bm{x}(τ) \\) s kvadratickým kritériem optimality \\[J = \\int_{-∞}^{∞} \\underbrace{ \\bm{x}^T \\bm{Q} \\, \\bm{x} \u0026#43; \\bm{u}^T \\bm{R} \\, \\bm{u} }_{L(\\bm{x},\\bm{u},τ)} \\, dτ\\] přičemž \\[\\bm{Q} = \\bm{Q}^T ⪰ 0 \\;,\\quad \\bm{R} = \\bm{R}^T ⪰ 0\\] Jeho syntéza je založena na nalezní řešení Bellmanovy diferenciální rovnice 1 \\[%\\left. -\\frac{∂J^*(t)}{∂τ} %\\right|_{τ=t} = %\\left. \\min_{\\bm{u}} \\left( L(\\bm{x},\\bm{u},τ) \u0026#43; \\frac{∂J^*(t)}{∂\\bm{x}}\t\\bm{f}(\\bm{x},\\bm{u},τ) \\right) %\\right|_{τ=t}\\] vyjádřené v čase \\( τ = t \\) s Bellmanovou funkcí 1 ve tvaru \\[J^*(t) = \\bm{x}(t)^T \\bm{S} \\, \\bm{x}(t) \\;,\\quad \\bm{S} = \\bm{S}^T\\] Po dosazení výše uvedených tvarů Bellmanovy funkce, stavového popisu systému a Lagrangiánu, získáváme rovnici \\[0 = \\min_{\\bm{u}} \\left( \\bm{x}^T \\bm{Q} \\, \\bm{x} \u0026#43; \\bm{u}^T \\bm{R} \\, \\bm{u} \u0026#43; 2 \\bm{x}^T \\bm{S} ( \\bm{A} \\bm{x} \u0026#43; \\bm{B} \\bm{u} ) \\right)\\] přičemž z podmínky lokálního extrému \\[\\frac{∂}{∂\\bm{u}} \\left( \\bm{x}^T \\bm{Q} \\, \\bm{x} \u0026#43; \\bm{u}^T \\bm{R} \\, \\bm{u} \u0026#43; 2 \\bm{x}^T \\bm{S} ( \\bm{A} \\bm{x} \u0026#43; \\bm{B} \\bm{u} ) \\right) = 0\\] lze vyjádřit optimální řízení \\( \\bm{u}^*(τ) \\) \\[\\bm{u}^* = - \\bm{R}^{-1} \\bm{B}^T \\bm{S} \\, \\bm{x} \\] které když dosadíme, získáme rovnici \\[0 = \\bm{x}^T \\bm{Q} \\, \\bm{x} \u0026#43; \\bm{x}^T \\bm{S} \\bm{B} \\bm{R}^{-1} \\bm{R} \\bm{R}^{-1} \\bm{B}^T \\bm{S} \\, \\bm{x} \u0026#43; 2 \\bm{x}^T \\bm{S} ( \\bm{A} \\bm{x} - \\bm{B} \\bm{R}^{-1} \\bm{B}^T \\bm{S} \\, \\bm{x} )\\] Tu lze dále upravit na \\[0 = \\bm{x}^T \\left( \\bm{Q} - \\bm{S}\\bm{B}\\bm{R}^{-1} \\bm{B}^T \\bm{S} \u0026#43; \\bm{S}\\bm{A} \u0026#43; \\bm{A}^T \\bm{S} \\right) \\bm{x}\\] která platí pro libovolné \\( \\bm{x}(t) \\) pokud je \\( \\bm{S} \\) řešením tzv. Continuous Algebraic Riccati Equation (C.A.R.E.) \\[\\bm{Q} - \\bm{S}\\bm{B}\\bm{R}^{-1} \\bm{B}^T \\bm{S} \u0026#43; \\bm{S}\\bm{A} \u0026#43; \\bm{A}^T \\bm{S} = 0\\] Belmannův princip optimality\u0026#160;\u0026#x21a9;\u0026#xfe0e;\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"}]