[{"id":0,"href":"/Notes/en/docs/op/lcp/","title":"Linear Complementarity Problem (LCP)","section":"Optimization problems","content":"Linear Complementarity problems can be defined as \\[\\operatornamewithlimits{find}_{\\bm{w},\\bm{z}} \\ \\text{subject to}: \\quad \\begin{aligned} \\bm{w} \u0026amp;= \\bm{q} \u0026#43; \\bm{M} \\bm{z} \\\\ \\bm{w},\\bm{z} \u0026amp;\\geq 0 \\\\ \\bm{w}^T\\bm{z} \u0026amp;= 0 \\end{aligned}\\] which we may write in the short-hand \\[\\operatornamewithlimits{find}_{\\bm{z}} \\ \\text{s.t.}: \\quad 0 \\leq (\\bm{q} \u0026#43; \\bm{M}\\bm{z}) \\perp \\bm{z} ≥ 0\\] "},{"id":1,"href":"/Notes/en/docs/op/qpp2lcp/","title":"QPP to LCP conversion","section":"Optimization problems","content":"Quadratic programming (QP) problems with non-strict inequality constraints \\[\\begin{aligned} \\text{minimize:}\u0026amp; \\quad \\frac{1}{2}\\bm{x}^T\\bm{Q}\\bm{x} \u0026#43; \\bm{c}^T\\bm{x}\\\\ \\text{subject to:}\u0026amp; \\quad \\bm{A}\\bm{x} \\geq \\bm{b} \\end{aligned}\\] where \\( \\bm{Q} = \\bm{Q}^T \\) can be converted to Linear complementarity problems (LCPs) 1 \\[\\operatornamewithlimits{find}_{\\bm{z}} \\ \\text{s.t.}: \\quad 0 \\leq (\\bm{q} \u0026#43; \\bm{M}\\bm{z}) \\perp \\bm{z} ≥ 0\\] Pre-requisit # The pre-requisit for this convertion are the Karuch-Kuhn-Tucker (KKT) conditions 2 \\[\\begin{aligned} \\bm{g}(\\bm{x}) ≤ 0 \\\\ \\bm{λ} ≤ 0 \\\\ \\bm{λ}^T \\bm{g}(\\bm{x}) = 0 \\\\ ∇f(\\bm{x}) \u0026#43; \\bm{λ}^T ∇\\bm{g}(\\bm{x}) = 0 \\end{aligned}\\] for finding the solution to a constrained optimization problem in the form \\[\\begin{aligned} \\text{minimize:}\u0026amp; \\quad f(\\bm{x}) \\\\ \\text{subject to:}\u0026amp; \\quad \\bm{g}(\\bm{x}) ≤ 0 \\end{aligned}\\] where \\( f(\\bm{x}) \\) must be convex.\nConversion # Karuch-Kuhn-Tucker conditions of a QP can be written as \\[\\begin{aligned} \\bm{b} - \\bm{A}\\bm{x} ≤ 0 \\\\ \\bm{λ} ≤ 0 \\\\ \\bm{λ}^T (\\bm{b} - \\bm{A}\\bm{x}) = 0 \\\\ \\bm{x}^T \\bm{Q} \u0026#43; \\bm{c}^T - \\bm{λ}^T \\bm{A} = 0 \\end{aligned}\\] From the last KKT condition we may express \\( \\bm{x} \\) as \\[\\bm{x} = \\bm{Q}^{-1} ( \\bm{A}^T \\bm{\\lambda} - \\bm{c})\\] and substitute it into the first (also the third) condition, resulting in \\[\\begin{aligned} \\bm{b} - \\bm{A} \\bm{Q}^{-1} ( \\bm{A}^T \\bm{\\lambda} - \\bm{c}) ≤ 0 \\end{aligned}\\] Individual terms of the LCP can then be assigned as \\[\\begin{aligned} \\bm{q} \u0026amp;\\coloneqq - \\bm{A} \\bm{Q}^{-1} \\bm{c} - \\bm{b} \\\\ \\bm{M} \u0026amp;\\coloneqq \\bm{A} \\bm{Q}^{-1} \\bm{A}^T \\\\ \\bm{z} \u0026amp;\\coloneqq \\bm{λ} \\end{aligned}\\] 1\nsource: LCP\u0026#160;\u0026#x21a9;\u0026#xfe0e;\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nsource: KKT conditions\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"},{"id":2,"href":"/Notes/en/docs/dynamicsdiscontinuities/rigidcontact/","title":"Rigid contact","section":"Dynamics' discontinuities","content":"rigid contact in equations of motion can be inforced by a single quadratic equality constraint and two linear inequality constraint \\[\\begin{aligned} \\bm{ϕ}(\\bm{q})⋅\\bm{f} \u0026amp;= 0 \\\\ \\bm{\\phi}(\\bm{q}) \u0026amp;≥ 0 \\\\ \\bm{f} \u0026amp;≥ 0 \\end{aligned}\\] which can be written in the compact form of an LSP as \\[\\operatornamewithlimits{find}_{\\bm{f}} \\ \\text{s.t.}: 0 ≤ \\bm{ϕ}(\\bm{q}) ⟂ \\bm{f} ≥ 0\\] Example # Take a simple cart Its equations of motion can be written as \\[m\\ddot{q} = u \u0026#43; f\\] suplemented by contact constraints \\[\tfq = 0 \\;,\\quad q ≥ 0 \\;,\\quad f ≥ 0\\] written in the compact form of an LSP as \\[\\operatornamewithlimits{find}_{f} \\ \\text{s.t.}: 0 ≤ q ⟂ f ≥ 0\\] By discretizing the EoM we can approximate \\( q_{n\u0026#43;1} \\) using the semi-implicit Euler scheme \\[\\begin{aligned} q_{n\u0026#43;1} \u0026amp;≈ q_n \u0026#43; h \\dot{q}_{n\u0026#43;1} \\\\ \\dot{q}_{n\u0026#43;1} \u0026amp;≈ \\dot{q}_n \u0026#43; h \\ddot{q}_n \\end{aligned}\\] where \\[\\ddot{q}_{n} = \\frac{u_n\u0026#43;f_n}{m}\\] After consecutive substitutions we attain the approximation \\[q_{n\u0026#43;1} = q_n \u0026#43; h \\dot{q}_n \u0026#43; \\frac{h^2}{m} u_n \u0026#43; \\frac{h^2}{m} f_n\\] for which we may formulate the LCP \\[\\operatornamewithlimits{find}_{f} \\ \\text{s.t.}: 0 ≤ q_{n\u0026#43;1} ⟂ f_n ≥ 0\\] In line with the original definiton of the LCP we have \\[\\bm{w} \\coloneqq q_{n\u0026#43;1} \\;,\\quad \\bm{z} \\coloneqq f\t\\] and terms \\[\\begin{aligned} \\bm{q} \u0026amp;\\coloneqq q_n \u0026#43; h \\dot{q}_n \u0026#43; \\frac{h^2}{m} u_n \\\\ \\bm{M} \u0026amp;\\coloneqq \\frac{h^2}{m} \\end{aligned}\\] More on the topic can be read in B3.3 of Russ Tedrake\u0026rsquo;s underactuated notes.\n"},{"id":3,"href":"/Notes/en/docs/dynamicsdiscontinuities/coulombfriction/","title":"Coulomb friction","section":"Dynamics' discontinuities","content":"In the case of Coulomb friction there are two general cases for the friction force \\( f \\) \\[f = \\begin{cases} \\dot{q} = 0 : |f| \u0026lt; μmg \\\\ \\dot{q} \\neq 0 : |f| = μmg \\end{cases}\\] where \\( mg \\) is always the magnitude of the normal force and \\( μ \\) the coefficient of friction. This can be written in the very compact condition \\[0 ≤ μ mg - |f| ⟂ \\dot{q}\\] By introducing slack variables \\( f^\u0026#43; \\) , \\( f^- \\) where \\( f = f^\u0026#43; - f^- \\) and \\( v_\\text{abs} = |\\dot{q}| \\) we may convert the condition into an LCP \\[\\operatornamewithlimits{find}_{v_\\text{abs},f^\u0026#43;,f^-} \\ \\text{s.t.}: \\begin{aligned} \\quad 0 \u0026amp;\\leq v_\\text{abs} \u0026#43; v \u0026amp;\\perp\u0026amp; \u0026amp; f^\u0026#43; \u0026amp;≥ 0 \\\\ \\quad 0 \u0026amp;\\leq v_\\text{abs} - v \u0026amp;\\perp\u0026amp; \u0026amp; f^- \u0026amp;≥ 0 \\\\ \\quad 0 \u0026amp;\\leq μmg - f^\u0026#43; -f^- \u0026amp;\\perp\u0026amp; \u0026amp; v_\\text{abs} \u0026amp;≥ 0 \\end{aligned}\\] source: Example B.5 of Russ Tedrake\u0026rsquo;s \u0026lsquo;Underactuated\u0026rsquo; notes\n"}]