[{"id":0,"href":"/Notes/docs/bellman/","title":"Bellmanův princip optimality","section":"Docs","content":" Bellmanův princip optimality # Pro dynamický systém se stavovou zpětnou vazbou ve tvaru \\[\\dot{\\bm{x}} = \\bm{f}(\\bm{x},\\bm{u},τ) \\;,\\quad \\bm{u} = \\bm{u}(\\bm{x})\\] kde \\( \\bm{x}(τ) \\) jsou stavy systému a \\( \\bm{u}(\\bm{x}) \\) funkce vstupů ze zpětnou vazbou, můžeme definovat pro trajektorii ze stavu \\( \\bm{x}(t) \\) do stavu \\( \\bm{x}(T) \\) kritérium optimality \\[J_{t→T} = ∫_{t}^{T} L(\\bm{x},\\bm{u},τ)\\,dτ\\] Pro libovolný stav \\( \\bm{x}(\\tau) \\) pak existuje optimální řízení \\( \\bm{u}^*(τ) \\) pro dosažení žádaného stavu v čase \\( T \\) \\[\\bm{u}^* = \\argmin_{\\bm{u}} J_{t→T}\\] kde Bellmanovou funkcí budeme nazýváme kritérium optimality při optimálním řízení \\[J_{t→T}^* = \\min_{\\bm{u}} J_{t→T}\\] Bellmanova rovnice # Pokud hledáme optimální řízení ve stavu \\( \\bm{x}(t) \\) , můžeme rozdělit celou trajektorii na dva úseky:\n\\( \\bm{x}(τ) \\,,\\; τ ∈ ⟨t,t\u0026#43;Δt) \\) s kritériem optimality \\( \\int_t^{t\u0026#43;Δt} L\\,dτ \\) \\( \\bm{x}(τ) \\,,\\; τ ∈ ⟨t\u0026#43;Δt,T⟩ \\) s kritériem optimality \\( J_{t\u0026#43;Δt→T} \\) S definovanými úseky můžeme Bellmanovu funkci rozepsat do tvaru tzv. Bellmanovy rovnice \\[J_{t→T}^* = \\min_{\\bm{u}} \\left( \\int_t^{t\u0026#43;Δt} L\\,dτ \u0026#43; J_{t\u0026#43;Δt→T} \\right)\\] Bellmanova diferenciání rovnice # Člen \\( J_{t\u0026#43;Δt→T} \\) můžeme rozepsat jako \\[J_{t\u0026#43;Δt→T} = J_{t→T} \u0026#43; ∫_{t}^{t\u0026#43;Δt} \\frac{dJ_{t→T}}{dτ} dτ\\] kdy dosazením získáme \\[J_{t→T}^* = \\min_{\\bm{u}} \\left( ∫_t^{t\u0026#43;Δt} L\\,dτ \u0026#43; J_{t→T} \u0026#43; ∫_{t}^{t\u0026#43;Δt} \\frac{dJ_{t→T}}{dτ} dτ \\right)\\] Jelikož platí \\[J_{t→T}^* = \\min_{\\bm{u}} \\left( J_{t→T} \\right)\\] člen \\( J_{t→T} \\) můžeme vykrátit s levou stranou \\[0 = \\min_{\\bm{u}} \\left( ∫_t^{t\u0026#43;Δt} L \u0026#43; \\frac{dJ_{t→T}}{dτ} \\ dτ \\right)\\] a provést úpravu \\[\\frac{dJ_{t→T}}{dτ} = \\frac{∂J_{t→T}}{∂\\bm{x}} \\bm{f} \u0026#43; \\frac{∂J_{t→T}}{∂τ}\\] Výsledkem jejího dosazení je rovnice \\[0 = \\min_{\\bm{u}} \\left( ∫_t^{t\u0026#43;Δt} L \u0026#43; \\frac{∂J_{t→T}}{∂\\bm{x}}\\bm{f} \u0026#43; \\frac{∂J_{t→T}}{∂τ} \\ dτ \\right)\\] Pokud \\( Δt→0 \\) , můžeme aproximovat integrál pomocí Reimannova součtu a výslednou rovnici upravit do obecného tvaru (nezávislého na mezích kritéria optimality) tzv. Bellmanovy diferenciální rovnice \\[%\\left. -\\frac{∂J^*}{∂τ} %\\right|_{τ=t} = %\\left. \\min_{\\bm{u}} \\left( L \u0026#43; \\frac{∂J}{∂\\bm{x}}\t\\bm{f} \\right) %\\right|_{τ=t}\\] vyjádřené v čase \\( τ = t \\) , ze které lze přímo odvodit LQR a s úpravou, Pontrjaginův princip minima.\n"},{"id":1,"href":"/Notes/docs/bellman/lqr/","title":"Linear Quadratic Regulator","section":"Bellmanův princip optimality","content":" Linear Quadratic Regulator (LQR) # LQR je určen pro regulaci lineárního systému se stavovou zpětnou vazbou ve tvaru \\[\\bm{\\dot{x}} = \\bm{A} \\, \\bm{x} \u0026#43; \\bm{B} \\, \\bm{u} \\;,\\quad \\bm{u} = \\bm{u}(\\bm{x})\\] kde \\( \\bm{x} = \\bm{x}(τ) \\) s kvadratickým kritériem optimality \\[J = \\int_{-∞}^{∞} \\underbrace{ \\bm{x}^T \\bm{Q} \\, \\bm{x} \u0026#43; \\bm{u}^T \\bm{R} \\, \\bm{u} }_{L(\\bm{x},\\bm{u},τ)} \\, dτ\\] přičemž \\[\\bm{Q} = \\bm{Q}^T ⪰ 0 \\;,\\quad \\bm{R} = \\bm{R}^T ⪰ 0\\] Jeho syntéza je založena na nalezní řešení Bellmanovy diferenciální rovnice 1 \\[%\\left. -\\frac{∂J^*}{∂τ} %\\right|_{τ=t} = %\\left. \\min_{\\bm{u}} \\left( L \u0026#43; \\frac{∂J^*}{∂\\bm{x}}\t\\bm{f} \\right) %\\right|_{τ=t}\\] vyjádřené v čase \\( τ = t \\) s Bellmanovou funkcí 1 ve tvaru \\[J^* = \\bm{x}^T \\bm{S} \\, \\bm{x} \\;,\\quad \\bm{S} = \\bm{S}^T\\] Po dosazení výše uvedených tvarů Bellmanovy funkce, stavového popisu systému a Lagrangiánu, získáváme rovnici \\[0 = \\min_{\\bm{u}} \\left( \\bm{x}^T \\bm{Q} \\, \\bm{x} \u0026#43; \\bm{u}^T \\bm{R} \\, \\bm{u} \u0026#43; 2 \\bm{x}^T \\bm{S} ( \\bm{A} \\bm{x} \u0026#43; \\bm{B} \\bm{u} ) \\right)\\] přičemž z podmínky lokálního extrému \\[\\frac{∂}{∂\\bm{u}} \\left( \\bm{x}^T \\bm{Q} \\, \\bm{x} \u0026#43; \\bm{u}^T \\bm{R} \\, \\bm{u} \u0026#43; 2 \\bm{x}^T \\bm{S} ( \\bm{A} \\bm{x} \u0026#43; \\bm{B} \\bm{u} ) \\right) = 0\\] lze vyjádřit optimální řízení \\( \\bm{u}^*(τ) \\) \\[\\bm{u}^* = - \\bm{R}^{-1} \\bm{B}^T \\bm{S} \\, \\bm{x} \\] které když dosadíme, získáme rovnici \\[0 = \\bm{x}^T \\bm{Q} \\, \\bm{x} \u0026#43; \\bm{x}^T \\bm{S} \\bm{B} \\bm{R}^{-1} \\bm{R} \\bm{R}^{-1} \\bm{B}^T \\bm{S} \\, \\bm{x} \u0026#43; 2 \\bm{x}^T \\bm{S} ( \\bm{A} \\bm{x} - \\bm{B} \\bm{R}^{-1} \\bm{B}^T \\bm{S} \\, \\bm{x} )\\] Tu lze dále upravit na \\[0 = \\bm{x}^T \\left( \\bm{Q} - \\bm{S}\\bm{B}\\bm{R}^{-1} \\bm{B}^T \\bm{S} \u0026#43; \\bm{S}\\bm{A} \u0026#43; \\bm{A}^T \\bm{S} \\right) \\bm{x}\\] která platí pro libovolné \\( \\bm{x}(t) \\) pokud je \\( \\bm{S} \\) řešením tzv. Continuous Algebraic Riccati Equation (C.A.R.E.) \\[\\bm{Q} - \\bm{S}\\bm{B}\\bm{R}^{-1} \\bm{B}^T \\bm{S} \u0026#43; \\bm{S}\\bm{A} \u0026#43; \\bm{A}^T \\bm{S} = 0\\] Belmannův princip optimality\u0026#160;\u0026#x21a9;\u0026#xfe0e;\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"},{"id":2,"href":"/Notes/docs/bellman/pontrjagin/","title":"Pontjaginův princip minima","section":"Bellmanův princip optimality","content":"Přestože Pontrjaginův princip minima byl odvozen nezávisle v sovětském svazu, je možné jej odvodit z Bellmanovy diferenciální rovnice 1 \\[%\\left. -\\frac{∂J^*}{∂τ} %\\right|_{τ=t} = %\\left. \\min_{\\bm{u}} \\left( L \u0026#43; \\frac{∂J}{∂\\bm{x}}\t\\bm{f} \\right) %\\right|_{τ=t}\\] Základem je zavedení Hamiltoniánu \\[H = -\\frac{∂J}{∂τ}\\] a konjugovaného stavového vektoru \\[\\bm{p} = \\frac{∂J}{∂\\bm{x}^T}\\] Bellmanovu diferenciální rovnici pak můžeme psát jako \\[%\\left. H^* %\\right|_{τ=t} = %\\left. \\min_{\\bm{u}} \\left( L \u0026#43; \\bm{p}^T\t\\bm{f} \\right) %\\right|_{τ=t}\\] kde \\( H^* \\) je Hamiltonián při dosazení optimálního řízení \\( \\bm{u}^* \\) které jej minimalizuje \\[\\bm{u}^* = \\argmin_{\\bm{u}} H\\] Samotný Hamiltonián lze vyjádřit jako obsah závroky \\[H = L \u0026#43; \\bm{p}^T\t\\bm{f}\\] a z něj odvodit stavové rovnice \\[\\dot{\\bm{x}} = \\frac{∂H}{∂\\bm{p}^T} \\qquad \\dot{\\bm{p}} = -\\frac{∂H}{∂\\bm{x}^T}\\] kde je využito že vektor \\( \\bm{p} \\) je stavový vektor (závislý pouze na \\( τ \\) ) a tedy platí \\[\\frac{d\\bm{p}}{dτ} = \\frac{∂\\bm{p}}{∂τ} = \\frac{∂^2J}{∂τ ∂\\bm{x}^T} = -\\frac{∂H}{∂\\bm{x}^T}\\] Belmannův princip optimality\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"}]